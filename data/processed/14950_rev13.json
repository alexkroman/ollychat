[
  {
    "name": "Config update",
    "description": "Shows if the last configuration update was successful. \"Not Ok\" means there was an unsuccessful attempt to update the configuration due to some error. Check the log for details.",
    "queries": [
      "count(vmalert_config_last_reload_successful < 1 ) or 0"
    ]
  },
  {
    "name": "Alerting rules",
    "description": "Shows the total number of loaded alerting rules across selected instances and groups.",
    "queries": [
      "count(vmalert_alerting_rules_last_evaluation_samples)"
    ]
  },
  {
    "name": "Recording rules",
    "description": "Shows the total number of loaded recording rules across selected instances and groups.",
    "queries": [
      "count(vmalert_recording_rules_last_evaluation_samples)"
    ]
  },
  {
    "name": "Errors",
    "description": "Shows the total number of errors generated by recording/alerting rules for selected instances and groups.",
    "queries": [
      "(sum(increase(vmalert_alerting_rules_errors_total[30m])) or vector(0)) + \n(sum(increase(vmalert_recording_rules_errors_total[30m])) or vector(0))"
    ]
  },
  {
    "name": "No data errors",
    "description": "Shows number of Recording Rules which produce no data.\n\n Usually it means that such rules are misconfigured, since they give no output during the evaluation.\nPlease check if rule's expression is correct and it is working as expected.",
    "queries": [
      "count(vmalert_recording_rules_last_evaluation_samples < 1) or 0"
    ]
  },
  {
    "name": "",
    "description": "",
    "queries": [
      "sum(vm_app_version) by(job, short_version)"
    ]
  },
  {
    "name": "Uptime",
    "description": "",
    "queries": [
      "sum(min_over_time(up[30m])) by (job)"
    ]
  },
  {
    "name": "Alerts fired total ($instance)",
    "description": "Shows the number of fired alerts by job.",
    "queries": [
      "sum(increase(vmalert_alerts_fired_total[30m])) by(job)"
    ]
  },
  {
    "name": "Top $topk groups avg evaluation duration ($group)",
    "description": "Top $topk groups by evaluation duration. Shows groups that take the most of time during the evaluation across all instances.\n\nThe panel uses MetricsQL functions and may not work with Prometheus.",
    "queries": [
      "topk_max($topk, max(sum(\n    rate(vmalert_iteration_duration_seconds_sum[30m])\n/\n    rate(vmalert_iteration_duration_seconds_count[30m])\n) by(job, instance, group)) \nby(job, group))"
    ]
  },
  {
    "name": "Rules execution rate ($instance)",
    "description": "Shows how many requests (executions) per second vmalert sends to the configured datasource.",
    "queries": [
      "sum(rate(vmalert_execution_total[30m])) by (job)"
    ]
  },
  {
    "name": "Rules execution errors ($instance)",
    "description": "Shows the error rate while executing configured rules. Non-zero value means there are some issues with existing rules. Check the logs to get more details.",
    "queries": [
      "sum(rate(vmalert_execution_errors_total[30m])) by(job) > 0"
    ]
  }
]