[
  {
    "name": "Memory Target vs Memory Usage",
    "description": "Shows the recommendations that the VPA gives as target usage. The graph also shows the actual usage of each container.",
    "queries": [
      "sum(container_memory_working_set_bytes) by (container,pod)",
      "sum(kube_customresource_vpa_containerrecommendations_target) by (container)"
    ]
  },
  {
    "name": "VPA Memory Recommendations vs Requests and Limits",
    "description": "Shows the recommendation of the VPA and compares it to the requests and limits of all containers in a pod. \n\n**Requests and/or limits may not reflect useful values if they are not defined for each container in a pod.",
    "queries": [
      "sum(kube_customresource_vpa_containerrecommendations_target) by (container)",
      "sum(kube_pod_container_resource_requests) by (container,pod)",
      "sum(kube_pod_container_resource_limits) by (container,pod)"
    ]
  },
  {
    "name": "CPU Target vs CPU Usage",
    "description": "Shows the recommendations that the VPA gives as target usage. The graph also shows the actual usage of each container.",
    "queries": [
      "sum(rate(container_cpu_usage_seconds_total[30m])) by (container,pod) * 1000",
      "sum(kube_customresource_vpa_containerrecommendations_target) by (container) * 1000"
    ]
  },
  {
    "name": "VPA CPU Recommendations vs Requests and Limits",
    "description": "Shows the recommendation of the VPA and compares it to the requests and limits of all containers in a pod. \n\n**Requests and/or limits may not reflect useful values if they are not defined for each container in a pod.",
    "queries": [
      "sum(kube_customresource_vpa_containerrecommendations_target) by (container) * 1000",
      "sum(kube_pod_container_resource_requests) by (container,pod) * 1000",
      "sum(kube_pod_container_resource_limits) by (container,pod) * 1000"
    ]
  }
]