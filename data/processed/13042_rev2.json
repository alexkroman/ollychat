[
  {
    "name": "Fluentd output error/retry rate",
    "description": "If you see errors then you probbaly have serious issues with log processing, see https://docs.fluentd.org/buffer#handling-unrecoverable-errors\n\nRetries are normal but should occur only from time to time, otherwise check for network errors or destination is too slow and requires additional tuning per given provider.",
    "queries": [
      "sum(rate(fluentd_output_status_retry_count[1m]))",
      "sum(rate(fluentd_output_status_num_errors[1m]))"
    ]
  },
  {
    "name": "Input /  output rate",
    "description": "Input  and output total rates",
    "queries": [
      "sum(rate(fluentd_input_status_num_records_total[1m]))",
      "sum(rate(fluentd_output_status_write_count[1m]))"
    ]
  },
  {
    "name": "fluentd output status buffer available space ratio",
    "description": "This should not reach 0 otherwise logs are blocked from processing or even dropped",
    "queries": [
      "min(fluentd_output_status_buffer_available_space_ratio)"
    ]
  },
  {
    "name": "fluentd output status flush time count rate",
    "description": "total flush time",
    "queries": [
      "sum(rate(fluentd_output_status_flush_time_count[1m]))",
      "sum(rate(fluentd_output_status_slow_flush_count[1m]))"
    ]
  },
  {
    "name": "Current total size of stage and queue buffers.",
    "description": "Current total size of stage and queue buffers.\nfluentd_output_status_buffer_total_bytes",
    "queries": [
      "sum(fluentd_output_status_buffer_total_bytes) by (type)"
    ]
  },
  {
    "name": "Fluentd output buffer queue",
    "description": "",
    "queries": [
      "sum(fluentd_output_status_buffer_queue_length)"
    ]
  }
]