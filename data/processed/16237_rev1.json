[
  {
    "name": "Node Utilization",
    "description": "",
    "queries": [
      "((karpenter_nodes_total_pod_requests or karpenter_nodes_allocatable*0 + karpenter_nodes_total_daemon_requests or karpenter_nodes_allocatable*0) *100) / karpenter_nodes_allocatable"
    ]
  },
  {
    "name": "Node Overcommitment",
    "description": "",
    "queries": [
      "((karpenter_nodes_total_pod_limits or karpenter_nodes_allocatable*0 + karpenter_nodes_total_daemon_limits or karpenter_nodes_allocatable*0 ) *100) / karpenter_nodes_allocatable"
    ]
  },
  {
    "name": "Cluster Residual Capacity",
    "description": "",
    "queries": [
      "sum by (resource_type)(karpenter_nodes_allocatable or karpenter_nodes_total_overhead*0 or karpenter_nodes_total_requests*0)- sum by (resource_type)(karpenter_nodes_total_overhead or karpenter_nodes_allocatable*0 or karpenter_nodes_total_requests*0) - sum by (resource_type)(karpenter_nodes_total_requests or karpenter_nodes_allocatable*0 or karpenter_nodes_total_overhead*0)",
      "sum (karpenter_nodes_allocatable) - sum (karpenter_pods_state)"
    ]
  },
  {
    "name": "Current Node Metrics",
    "description": "",
    "queries": [
      "karpenter_nodes_allocatable",
      "karpenter_nodes_total_pod_requests",
      "karpenter_nodes_total_daemon_requests",
      "karpenter_nodes_total_pod_limits",
      "karpenter_nodes_total_daemon_limits",
      "karpenter_nodes_system_overhead",
      "((karpenter_nodes_total_pod_requests or karpenter_nodes_allocatable*0 + karpenter_nodes_total_daemon_requests or karpenter_nodes_allocatable*0) *100) / karpenter_nodes_allocatable",
      "((karpenter_nodes_total_pod_limits or karpenter_nodes_allocatable*0 + karpenter_nodes_total_daemon_limits or karpenter_nodes_allocatable*0 ) *100) / karpenter_nodes_allocatable"
    ]
  }
]