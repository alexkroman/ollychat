[
  {
    "name": "Total requests  ",
    "description": "",
    "queries": [
      "sum by(host) (count_over_time([$__interval]))  "
    ]
  },
  {
    "name": "Requests per status code",
    "description": "",
    "queries": [
      "sum by (status) (count_over_time( | json |  __error__=\"\" [$__interval]))"
    ]
  },
  {
    "name": "NGINX logs in bytes",
    "description": "",
    "queries": [
      "bytes_over_time([$__interval])"
    ]
  },
  {
    "name": "Total Bytes Sent",
    "description": "",
    "queries": [
      "sum by (host) (sum_over_time( | json | unwrap body_bytes_sent |  __error__=\"\" [$__interval]))"
    ]
  },
  {
    "name": "Realtime visitors ",
    "description": "",
    "queries": [
      "count(sum by (remote_addr) (count_over_time( | json |  __error__=\"\" [$__interval])))"
    ]
  },
  {
    "name": "# NGINX log lines",
    "description": "",
    "queries": [
      "count_over_time([$__interval])"
    ]
  },
  {
    "name": "% of 5xx requests ",
    "description": "",
    "queries": [
      "sum(count_over_time( | json | status >= 500 |__error__=\"\"[$__interval])) / (sum(count_over_time( | json | __error__=\"\"[$__interval]))/ 100)"
    ]
  },
  {
    "name": "% of requests by Googlebot",
    "description": "",
    "queries": [
      "sum(count_over_time(( |= \"Googlebot\")[$__interval])) / (sum(count_over_time(( != \"Googlebot\")[$__interval])) / 100)"
    ]
  },
  {
    "name": "Requests per Country",
    "description": "",
    "queries": [
      "sum by (geoip_country_code) (count_over_time( | json | geoip_country_code != \"\" | __error__=\"\" [$__interval]))"
    ]
  },
  {
    "name": "Top Countries",
    "description": "",
    "queries": [
      "topk(10, sum by (geoip_country_code) (count_over_time( | json | geoip_country_code != \"\" and  __error__=\"\" [$__interval])))"
    ]
  },
  {
    "name": "Recent requests",
    "description": "",
    "queries": [
      " | json | line_format \"➡️ } } with HTTP status: } \""
    ]
  },
  {
    "name": "95th percentile of Request Time",
    "description": "",
    "queries": [
      "quantile_over_time(0.95, | json | unwrap request_time |  __error__=\"\"  [$__interval]) by (host)",
      "max by (host) (max_over_time( | json | unwrap request_time |  __error__=\"\"  [$__interval]))"
    ]
  },
  {
    "name": "HTTP status codes over time",
    "description": "",
    "queries": [
      "sum by (status) (count_over_time( | json |  __error__=\"\" [$__interval]))"
    ]
  },
  {
    "name": "Bytes Sent",
    "description": "",
    "queries": [
      "sum by (host) (sum_over_time( | json | status=200 | unwrap body_bytes_sent |  __error__=\"\" [$__interval]))"
    ]
  }
]